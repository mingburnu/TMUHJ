<!DOCTYPE struts PUBLIC
        "-//Apache Software Foundation//DTD Struts Configuration 2.0//EN"
        "http://struts.apache.org/dtds/struts-2.0.dtd">
<struts>
	<constant name="struts.objectFactory"
		value="org.apache.struts2.spring.StrutsSpringObjectFactory" />

	<!-- allow submit action in button -->
	<constant name="struts.mapper.action.prefix.enabled" value="true" />

	<!-- not allow call method by url -->
	<constant name="struts.enable.DynamicMethodInvocation" value="false" />

	<!--allow upload file size -->
	<constant name="struts.devMode" value="false" />

	<constant name="struts.multipart.maxSize" value="9223372036854775807" />

	<package name="global" extends="struts-default">
		<interceptors>
			<interceptor name="loginSessionInterceptor"
				class="com.asiaworld.tmuhj.core.interceptor.LoginSessionInterceptor" />

			<interceptor-stack name="defaultInterceptor">
				<interceptor-ref name="loginSessionInterceptor" />
				<interceptor-ref name="defaultStack" />
			</interceptor-stack>
		</interceptors>

		<default-interceptor-ref name="defaultInterceptor" />

		<global-results>
			<result name="input">/sessionTimeOut.jsp</result>
			<result name="exception">/error.jsp</result>
		</global-results>
		<global-exception-mappings>
			<exception-mapping exception="java.lang.Exception"
				result="exception" />
		</global-exception-mappings>
	</package>

	<package name="authorizationAction" namespace="/authorization"
		extends="struts-default">
		<interceptors>
			<interceptor name="loginActionInterceptor"
				class="com.asiaworld.tmuhj.core.interceptor.LoginActionInterceptor" />

			<interceptor-stack name="defaultInterceptor">
				<interceptor-ref name="loginActionInterceptor" />
				<interceptor-ref name="defaultStack" />
			</interceptor-stack>
		</interceptors>

		<default-interceptor-ref name="defaultInterceptor" />
		<global-results>
			<result name="login">/login.jsp</result>
			<result name="input">/login.jsp</result>
			<result name="logout">/index.jsp</result>
			<result name="index">/WEB-INF/jsp/index.jsp</result>
		</global-results>
		<action name="login" class="authorizationAction" method="login" />
		<action name="logout" class="authorizationAction" method="logout" />
		<action name="userEntry" class="authorizationAction" method="userEntry" />
	</package>

	<package name="pageAction" extends="global">
		<action name="main" class="commonMainPageAction">
			<result name="success">/WEB-INF/jsp/index.jsp</result>
		</action>
		<action name="*" class="commonMainPageAction">
			<result name="success">/WEB-INF/jsp/module/apply/{1}/{1}List.jsp
			</result>
		</action>
	</package>

	<package name="crudAction" namespace="/crud" extends="global">


		<action name="apply.*.*" class="{1}Action" method="{2}">
			<interceptor-ref name="defaultInterceptor" />
			<result name="input">/login.jsp</result>
			<result name="list">/WEB-INF/jsp/module/apply/{1}/{1}List.jsp
			</result>
			<result name="edit">/WEB-INF/jsp/module/apply/{1}/{1}Edit.jsp
			</result>
			<result name="view">/WEB-INF/jsp/module/apply/{1}/{1}View.jsp
			</result>
			<result name="ajax">/WEB-INF/jsp/module/apply/{1}/{1}Ajax.jsp
			</result>
			<result name="queue">/WEB-INF/jsp/module/apply/{1}/{1}Queue.jsp
			</result>
			<result name="success" type="stream">
				<param name="contentDisposition">attachment;filename="${reportFile}"</param>
				<param name="contentType">application/vnd.ms-excel</param>
				<param name="inputName">inputStream</param>
				<param name="bufferSize">1024</param>
			</result>
		</action>
	</package>

	<!--<package name="search" namespace="/search" extends="struts-default"> 
		<action name="apply.search.list" class="com.asiaworld.tmuhj.module.apply.search.service.SearchAction" 
		method="list"> <result name="search">/WEB-INF/jsp/module/apply/search/search.jsp 
		</result> </action> <action name="apply.search.query" class="com.asiaworld.tmuhj.module.apply.search.service.SearchAction" 
		method="query"> <result name="search">/WEB-INF/jsp/module/apply/search/search.jsp 
		</result> </action> </package> -->
</struts>

